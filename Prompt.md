# Prompt（复刻本项目 HTML）

将下面这段提示词完整复制给 AI，即可尽量生成与本项目一致的单文件网页：

---

请帮我生成一个**单文件** `index.html`（只用 HTML + CSS + JavaScript），实现一个“春节手势烟花秀”页面。  
要求视觉、手势玩法、音效、收官流程尽量完整，细节如下：

## 一、技术与结构要求

1. 输出必须是一个可直接运行的完整 HTML 文件（不要拆分多个文件）。  
2. 使用 `<canvas>` 绘制烟花动画。  
3. 使用 MediaPipe Hands（CDN）做手势识别：  
   - `@mediapipe/camera_utils`  
   - `@mediapipe/drawing_utils`  
   - `@mediapipe/hands`  
4. 页面背景必须是纯黑夜空，不能出现常驻渐变底色。  
5. 画面包含：  
   - 主画布 `canvas`  
   - 右上角小型摄像头预览 `video`（半透明，镜像）  
   - 左上角状态 HUD（显示当前模式提示）  
   - 中央开场提示层  
   - 结尾对联层  
   - 红包雨层  

## 二、核心交互与状态机

请实现以下状态逻辑：

1. **未开始状态**
- 如果没检测到手，先自动放一段“暖场烟花”。
- 暖场结束后，在屏幕中间显示：
  `请将手放入画面，五指张开并停住 0.5 秒开启表演`

2. **开始手势**
- 五指张开并稳定约 0.5 秒后，进入表演中状态。

3. **表演中状态**
- 五指张开：全屏随机位置持续升空普通烟花（频率随张开程度可轻微变化）。
- 单指（食指）模式：  
  手指移动路径上依次发射普通烟花（轨迹发射，带节流，避免过密）。
- ✌️ V 手势模式（超级烟花）：  
  跟单指一样“跟随手指发射”，但发射频率比单指慢。  
  进入 V 手势时可先发射一枚超级烟花。
- 握拳约 1 秒：结束表演，进入收官流程。  
- 从张手/单指/V 切换时要有防误触保护，避免瞬间被误判成握拳直接结束。

4. **手离开画面时**
- 如果正在表演：继续自动放烟花，不中断。  
- 如果尚未开始：继续显示开场提示。

5. **结束后可重开**
- 收官完成后，若再次五指张开并停住 0.5 秒，可重新开始新一轮表演。

## 三、烟花视觉要求

1. 普通烟花：  
- 有火箭升空轨迹、爆炸粒子、拖尾。  
- 粒子颜色多彩（红橙黄绿青蓝紫等）。

2. 超级烟花（V 手势触发）：  
- 必须比普通烟花大一号（升空光点更大、爆炸粒子更多更大）。  
- 必须有“先升空再爆炸”，不能直接原地爆。  
- 不要“圆圈外框冲击波”效果。  
- 爆炸层次更丰富（多层环状/团簇扩散）。

3. 黑场真实感：  
- 每帧使用黑色/近黑色清屏并做适度残影衰减。  
- 不能在无烟花时保留上次爆炸的彩色背景。

4. 指示点：  
- 单指与 V 手势时，画面上显示当前指向位置的小圆点。

## 四、音效要求（Web Audio）

1. 使用 Web Audio API 程序化合成爆炸声，不依赖外部音频文件。  
2. 普通烟花音效：有冲击、爆裂、低频尾震，听感自然，不要电子音太重。  
3. 超级烟花音效：  
- 与普通烟花不同，独立音色。  
- 音量更大、低频更重、更低沉，类似“超级炸药”感。  
- 结构可做成：瞬态冲击 + 主爆轰 + 次级闷雷 + 长尾低频。  
4. 处理浏览器自动播放限制：首次交互后解锁音频上下文。  
5. 开场暖场烟花也要有爆炸声音。

## 五、结尾收官（重点还原）

握拳结束后按这个流程执行：

1. 从左到右依次升空一批收官烟花。  
2. 爆炸后由星光粒子在空中汇聚出“马”的轮廓（星光化马，不是直接贴图显示）。  
3. 在“马头上方”显示一段发光文案：`新春快乐`。  
4. 随后切换到对联收尾层（对联出现时，上一步“新春快乐”隐藏）。

## 六、对联收尾样式要求

1. 中央主体是一个大号 `福` 字。  
2. 横批文字：`馬年大吉`，要求从右往左显示（`direction: rtl` + `unicode-bidi`）。  
3. 右联：`金馬迎春財運旺`  
4. 左联：`平安喜樂福滿堂`  
5. 对联整体风格：红金配色、发光、喜庆。  
6. 对联显示后触发红包雨效果（emoji 或图形均可）。

## 七、手势识别细节建议（可直接实现）

1. 基于手部关键点计算“手掌开合度 + 手指伸展数量”。  
2. 建议判定：
- `isOpen`: 开合度高且至少 4 指伸展  
- `isPoint`: 仅食指明显伸展  
- `isSuper`: 食指和中指伸展（V 手势），允许轻微抖动容错  
- `isFist`: 开合度低且伸展手指数少  
3. 所有发射都要做节流参数，例如：
- 单指普通烟花：中等频率  
- V 手势超级烟花：比单指更慢
4. 握拳结束需要连续帧累计（约 1 秒）确认。

## 八、代码质量要求

1. 变量命名清晰，函数按职责拆分（如：`launchRocket`、`launchSuperFirework`、`finishShow`、`onHandResults`、`drawFireworks`）。  
2. 不要引入打包工具和框架。  
3. 页面在桌面和手机尺寸下都能正常显示。  
4. 输出只要最终 HTML 代码，不要额外解释。

---

如果你要更“像当前项目”的版本，可以在提示词末尾再加一句：

`请优先保证交互流程、手势节流、超级烟花音色分离、结尾“星光化马 -> 马头新春快乐 -> 对联+红包雨”的时序与细节一致。`

